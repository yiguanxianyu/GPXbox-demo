(function(){"use strict";var e={1654:function(e,t,o){var r=o(9242),n=o(3396),l=o(4870),i=o(3153),a=o.n(i);o(9500),o(8847);const s={id:"map"};var u={setup(e){let t,o,r=1;const l=()=>{t=a().map("map",{center:[39.99,116.303],zoom:15,preferCanvas:!0})},i=e=>{a().control.scale({maxWidth:100,metric:!0,imperial:!1}).addTo(e)},u=e=>{let t="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";a().tileLayer(t,{minZoom:7,maxZoom:19}).addTo(e)},c=()=>{},p=(0,n.FN)().appContext.config.globalProperties;return p.$bus.$on("fileRead",c),p.$bus.$on("speedScaleChanged",(e=>{r=e})),p.$bus.$on("sendPolyline",(e=>{o.setLatLngs(e.polyLine),a().polylineDecorator(e.polyLine,{patterns:[{repeat:50,symbol:a().Symbol.arrowHead({pixelSize:4,headAngle:75,polygon:!1,pathOptions:{stroke:!0,weight:1,color:"#d20b0b"}})}]}).addTo(t),t.fitBounds(o.getBounds());let n=[],l=a().polyline([{lat:e.polyLine[0][0],lon:e.polyLine[0][1]}],{weight:8,color:"#FF9900"}).addTo(t),i=e.polyLine.length,s=0,u=()=>{if(s<i-1){let t=e.polyLine[s];l.addLatLng({lat:t[0],lon:t[1]});let o=(e.timeArr[s+1]-e.timeArr[s])/r;n.push(setTimeout(u,o)),s++}};n.push(setTimeout(u,0))})),(0,n.bv)((()=>{l(),i(t),u(t),o=a().polyline([],{smoothFactor:.5}).addTo(t)})),(e,t)=>((0,n.wg)(),(0,n.iD)("div",s))}};const c=u;var p=c,d=o(6556),f=o(235);const m=(0,n.Uk)("上传文件");var g={setup(e){let t=(0,l.iH)(null);const o=(0,l.iH)(1),r=(0,n.FN)().appContext.config.globalProperties,i=({file:e})=>(r.$bus.$emit("fileRead",e.file),!1);return(e,r)=>((0,n.wg)(),(0,n.j4)((0,l.SU)(d.Z),{ref_key:"uploader",ref:t,accept:".gpx",max:o.value,onBeforeUpload:i},{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(f.Z),{type:"primary",size:"large"},{default:(0,n.w5)((()=>[m])),_:1})])),_:1},8,["max"]))}};const y=g;var b=y,h=o(1260),v=o(9468),w=o(3667),x=o(3645),S=o(4786),k=o(3144),A=o(1176),U=o(2505),$=o(4470);const _=(0,n.Uk)("其他功能"),P=(0,n.Uk)(" 别看了，还没做呢 "),W=(0,n.Uk)("  播放 "),Z=(0,n.Uk)("  暂停 "),T=(0,n.Uk)(" 倍速 ");var C={setup(e){const t=(0,h.U)(),o=(0,n.FN)().appContext.config.globalProperties,r=()=>{t.success("别点了，真的还没做呢"),o.$bus.$emit("titleRead",{title:{text:"Success",left:"center"}})},i=(0,l.iH)([{label:"1倍速",key:1},{label:"1.25倍速",key:1.25},{label:"1.5倍速",key:1.5},{label:"2倍速",key:2},{label:"4倍速",key:4},{label:"8倍速",key:8},{label:"16倍速",key:16}]);function a(e){t.info(String(e)+"倍速"),o.$bus.$emit("speedScaleChanged",e)}function s(e){console.log(e)}function u(e){console.log(e)}return(e,t)=>((0,n.wg)(),(0,n.j4)((0,l.SU)(v.Z),{vertical:""},{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(w.ZP),{id:"title",bordered:!1,"header-style":"font-size:2.5em",title:"GPXbox"}),(0,n.Wm)((0,l.SU)(v.Z),{justify:"space-around"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(b)),(0,n.Wm)((0,l.SU)(x.Z),{trigger:"hover"},{trigger:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(f.Z),{size:"large",type:"primary",onClick:r},{default:(0,n.w5)((()=>[_])),_:1})])),default:(0,n.w5)((()=>[P])),_:1})])),_:1}),(0,n.Wm)((0,l.SU)(v.Z),{justify:"space-around"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(f.Z),{secondary:"",strong:"",onClick:s},{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(S.g),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(A.Z))])),_:1}),W])),_:1}),(0,n.Wm)((0,l.SU)(f.Z),{secondary:"",strong:"",onClick:u},{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(S.g),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(U.Z))])),_:1}),Z])),_:1}),(0,n.Wm)((0,l.SU)(k.Z),{options:i.value,trigger:"hover",onSelect:a},{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(f.Z),{secondary:"",strong:""},{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(S.g),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)($.Z))])),_:1}),T])),_:1})])),_:1},8,["options"])])),_:1})])),_:1}))}};const L=C;var N=L,O=o(3215),j=o(8720),z=o(7031),D=o(6069),M=o(9483),F=o(7309),H=o(542),R=o(2015),G=o(5977),B=o(9952),I=o(7103),J=o(5381),K=o(7049),X=o(1068),E=o.n(X);function Y(e){let t=e.length,o=0;for(let r=0;r<t;r++)o+=e[r];return o/t}function q(e,t=0){let o=Math.pow(10,t);return Math.round(e*o)/o}function Q(e){const t=new Date(e);let o=t.getFullYear(),r=t.getMonth()+1,n=t.getDate(),l=t.getHours(),i=t.getMinutes(),a=t.getSeconds();return r=r>9?r:"0"+r,n=n>9?n:"0"+n,l=l>9?l:"0"+l,i=i>9?i:"0"+i,a=a>9?a:"0"+a,`${o}-${r}-${n} ${l}:${i}:${a}`}function V(e){let t=new(E());t.parse(e);let o,r,n=t.tracks[0],l=n.distance.cumul,i=n.points,a=i.map((e=>+e.time)),s=l.length,u=new Array(s);for(let c=0;c<s-2;c++)o=l[c+2]-l[c],r=a[c+2]-a[c],u[c+1]=1e3*o/r;u[0]=1e3*l[0]/(i[1].time-i[0].time),u[s-1]=1e3*(l[s-1]-l[s-3])/(i[s-1].time-i[s-3].time),this.timeArr=a,this.speedArr=u,this.gpx=t}V.prototype.getData=function(){let e=this.timeArr,t=this.speedArr,o=e.length,r=new Array(o);for(let n=0;n<o;n++)r[n]={value:[e[n],t[n]]};return r},V.prototype.getDataAsKmPreHour=function(){let e=this.timeArr,t=this.speedArr,o=e.length,r=new Array(o);for(let n=0;n<o;n++)r[n]={value:[e[n],3.6*t[n]]};return r},V.prototype.getDataAsMinutePerKm=function(){let e,t=Array.from(this.timeArr),o=Array.from(this.speedArr),r=t.length,n=new Array(r),l=t[t.length-1]-t[0],i=this.gpx.tracks[0].distance.total,a=l/(60*i);for(let s=0;s<r;s++){if(o[s]<.2){let t;t=s>1&&s<r-2?o.slice(s-2,s+2):1===s||s===r-2?o.slice(s-1,s+1):o,e=50/(3*Y(t))}else e=50/(3*o[s]);e>3*a&&(e=0),n[s]={value:[t[s],e]}}return n},V.prototype.toPolyline=function(){let e,t=this.gpx.tracks[0].points,o=t.length,r=new Array(o);for(let n=0;n<o;n++)e=t[n],r[n]=[e.lat,e.lon];return r},V.prototype.getTimeArr=function(){return this.timeArr};var ee=V,te={setup(e){function t(e){console.log(e)}(0,n.JJ)(O.bw,"light"),j.D([z.N,D.N,M.N,F.N,H.N,R.N,G.N,I.N,K.N,J.z,B.N]);let o=1,r=new Date(2022,5,16,5,30,30),i=105,a=Array(i);for(let n=0;n<i;n++)r=new Date(r.valueOf()+1e3),a[n]={value:[+r,q(20*Math.random()+100,2)]};let s={title:{text:"GPXbox",left:"middle"},tooltip:{trigger:"axis",formatter:e=>{e=e[0].data;let t=Q(e.value[0]);return`<p>${t}<br/>${q(e.value[1],2)}</p>`},axisPointer:{type:"cross",animation:!0,snap:!0}},xAxis:{type:"time",splitLine:{show:!1},boundaryGap:!1},yAxis:{type:"value",scale:!0,boundaryGap:["0%","0%"],splitNumber:2},toolbox:{show:!0,feature:{saveAsImage:{}}},dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"filter"},{type:"slider",yAxisIndex:0,filterMode:"none",left:"92%"}],series:[{type:"line",smooth:!0,showSymbol:!1,data:a,markLine:{symbol:"none",data:[{symbol:"circle",label:{position:"end",backgroundColor:"rgba(143,243,192,0.5)",borderRadius:[4,4,4,4],padding:[5,5,5,5],formatter:e=>Q(e.data.value)},xAxis:0},{symbol:"circle",yAxis:0,label:{position:"start",backgroundColor:"rgba(143,243,192,0.75)",borderRadius:[4,4,4,4],padding:[5,5,5,5]}}]},markPoint:{data:[],symbol:"circle",label:{show:!1},symbolSize:6,itemStyle:{color:"rgba(255, 0, 0, 1)"}}}],graphic:{type:"line",draggable:"horizontal",z:100}},u=(0,l.iH)(s);const c=(0,l.iH)(null);(0,n.bv)((()=>{}));const p=(0,n.FN)().appContext.config.globalProperties;let d=[];function f(e){const t=new FileReader;t.readAsText(e,"utf-8"),t.onload=()=>{for(let t=0,o=d.length;t<o;t++)clearTimeout(d[t]);let e=new ee(t.result);p.$bus.$emit("sendPolyline",{polyLine:e.toPolyline(),timeArr:e.getTimeArr()});let r=e.getData();u.value.series[0].data=r;let n=r.length,l=0,i=()=>{if(l<n-1){u.value.series[0].markLine.data[0].xAxis=r[l].value[0],u.value.series[0].markLine.data[1].yAxis=r[l].value[1],u.value.series[0].markPoint.data[0]={coord:[r[l].value[0],r[l].value[1]]};let e=(r[l+1].value[0]-r[l].value[0])/o;d.push(setTimeout(i,e)),l++}};d.push(setTimeout(i,0))}}return p.$bus.$on("fileRead",f),p.$bus.$on("titleRead",(e=>{u.value=e})),p.$bus.$on("speedScaleChanged",(e=>{o=e})),(e,o)=>((0,n.wg)(),(0,n.j4)((0,l.SU)(O.ZP),{ref_key:"chart",ref:c,autoresize:!0,option:(0,l.SU)(u),onClick:t},null,8,["option"]))}};const oe=te;var re=oe,ne=o(3838);const le={id:"container-up-down"},ie={id:"container-left-right"};var ae={setup(e){return(e,t)=>((0,n.wg)(),(0,n.j4)((0,l.SU)(ne.Z),null,{default:(0,n.w5)((()=>[(0,n._)("div",le,[(0,n._)("div",ie,[(0,n.Wm)((0,l.SU)(p),{id:"map"}),(0,n.Wm)((0,l.SU)(N),{id:"panel",ref:"panel"},null,512)]),(0,n.Wm)((0,l.SU)(re),{id:"map-charts"})])])),_:1}))}};const se=ae;var ue=se,ce=o(1373);const pe=(0,ce.Z)(),de={};de.$on=pe.on,de.$off=pe.off,de.$emit=pe.emit;var fe=de;const me=(0,r.ri)(ue);me.config.globalProperties.$bus=fe,me.mount("#app")}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var l=t[r]={exports:{}};return e[r].call(l.exports,l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,r,n,l){if(!r){var i=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],l=e[c][2];for(var a=!0,s=0;s<r.length;s++)(!1&l||i>=l)&&Object.keys(o.O).every((function(e){return o.O[e](r[s])}))?r.splice(s--,1):(a=!1,l<i&&(i=l));if(a){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[r,n,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,l,i=r[0],a=r[1],s=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(s)var c=s(o)}for(t&&t(r);u<i.length;u++)l=i[u],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(c)},r=self["webpackChunkgpxbox"]=self["webpackChunkgpxbox"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998],(function(){return o(1654)}));r=o.O(r)})();
//# sourceMappingURL=app.e136b7b9.js.map