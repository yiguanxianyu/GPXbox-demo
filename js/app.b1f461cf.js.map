{"version":3,"file":"js/app.b1f461cf.js","mappings":"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","sources":["webpack://gpxbox/./src/components/Map/mapView.vue","webpack://gpxbox/./src/components/Map/mapView.vue?e159","webpack://gpxbox/./src/components/Control/readGPX.vue","webpack://gpxbox/./src/components/Control/readGPX.vue?c692","webpack://gpxbox/./src/components/Control/controlPanel.vue","webpack://gpxbox/./src/components/Control/controlPanel.vue?7eb6","webpack://gpxbox/./src/components/utils.js","webpack://gpxbox/./src/components/Control/gpxProcess.js","webpack://gpxbox/./src/components/Chart/viewChart.vue","webpack://gpxbox/./src/components/Chart/viewChart.vue?395e","webpack://gpxbox/./src/App.vue","webpack://gpxbox/./src/components/bus.js","webpack://gpxbox/./src/main.js","webpack://gpxbox/webpack/bootstrap","webpack://gpxbox/webpack/runtime/chunk loaded","webpack://gpxbox/webpack/runtime/compat get default export","webpack://gpxbox/webpack/runtime/define property getters","webpack://gpxbox/webpack/runtime/global","webpack://gpxbox/webpack/runtime/hasOwnProperty shorthand","webpack://gpxbox/webpack/runtime/make namespace object","webpack://gpxbox/webpack/runtime/jsonp chunk loading","webpack://gpxbox/webpack/startup"],"sourcesContent":["<template>\r\n  <div id=\"map\"></div>\r\n</template>\r\n\r\n<script setup>\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet-polylinedecorator\"\r\nimport {getCurrentInstance, onMounted} from \"vue\";\r\n\r\nlet map;\r\nlet gpxPolyline;\r\nlet gpxLineDecorator;\r\nlet speedRatio = 1;\r\nlet index;\r\nlet setTimeoutID = [];\r\nlet animP;\r\nlet dataLength;\r\nlet inputPolyline;\r\nlet timeDelta;\r\n\r\nconst addMap = () => {\r\n  map = L.map(\"map\", {\r\n    center: [39.99, 116.303],\r\n    zoom: 15,\r\n    attributionControl: false\r\n  });\r\n};\r\n\r\nconst addScale = (map) => {\r\n  L.control.scale({\r\n    maxWidth: 100,\r\n    metric: true,\r\n    imperial: false,\r\n  }).addTo(map);\r\n};\r\n\r\nconst addTile = (map) => {\r\n  let tileUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\r\n  L.tileLayer(tileUrl, {minZoom: 7, maxZoom: 19}).addTo(map);\r\n};\r\n\r\nconst addCircle = () => {\r\n  /*L.motion\r\n    .polyline(\r\n      [\r\n        [39.990, 116.3030],\r\n        [39.991, 116.3036],\r\n        [39.993, 116.3039],\r\n        [39.996, 116.3033],\r\n        [39.992, 116.3010],\r\n      ],\r\n      {\r\n        color: \"red\",\r\n      },\r\n      {\r\n        auto: true,\r\n        duration: 5000,\r\n        easing: L.Motion.Ease.easeInOutQuart,\r\n      },\r\n      {\r\n        removeOnEnd: false,\r\n        icon: L.icon({\r\n          iconUrl: \"../assets/logo.png\",\r\n          iconSize: [25.1, 25],\r\n        }),\r\n      }\r\n    )\r\n    .addTo(map);*/\r\n};\r\n\r\nconst ctx = getCurrentInstance().appContext.config.globalProperties;\r\nctx.$bus.$on('fileRead', addCircle);\r\nctx.$bus.$on('speedRatioChanged', (sc) => {\r\n  speedRatio = sc;\r\n})\r\n\r\nctx.$bus.$on('sendPolyline', (input) => {\r\n  gpxPolyline.setLatLngs(input.polyline);\r\n  gpxLineDecorator.setPaths(input.polyline);\r\n  map.fitBounds(gpxPolyline.getBounds())\r\n\r\n  // 实时轨迹线\r\n  if (animP === undefined) {\r\n    //第一次读入\r\n    animP = L.polyline([{lat: input.polyline[0][0], lon: input.polyline[0][1]}], {\r\n      smoothFactor: 0.5,\r\n      weight: 4,\r\n      color: '#ff6500'\r\n    }).addTo(map);\r\n  } else {\r\n    //重新读入\r\n    animP.setLatLngs([{lat: input.polyline[0][0], lon: input.polyline[0][1]}])\r\n  }\r\n\r\n  index = 0;\r\n  dataLength = input.polyline.length;\r\n  timeDelta = input.timeDelta;\r\n\r\n  let inputPl = new Array(dataLength);\r\n  for (let i = 0; i < dataLength; i++) {\r\n    let point = input.polyline[i];\r\n    inputPl[i] = {lat: point[0], lon: point[1]}\r\n  }\r\n  inputPolyline = inputPl;\r\n});\r\n\r\nctx.$bus.$on('play', () => {\r\n  let set = () => {\r\n    if (index < dataLength - 1) {\r\n      animP.addLatLng(inputPolyline[index]);\r\n      setTimeoutID.push(setTimeout(set, timeDelta[index] / speedRatio));\r\n      index++;\r\n    }\r\n  }\r\n  setTimeoutID.push(setTimeout(set, 0));\r\n});\r\n\r\nctx.$bus.$on('pause', () => {\r\n  for (let j = 0, idLength = setTimeoutID.length; j < idLength; j++) {\r\n    clearTimeout(setTimeoutID[j]);\r\n  }\r\n});\r\n\r\nctx.$bus.$on('backToStart', () => {\r\n  index = 0;\r\n  let startPoint = animP.getLatLngs()[0];\r\n  animP.setLatLngs([startPoint]);\r\n})\r\n\r\nonMounted(() => {\r\n  addMap();\r\n  addScale(map);\r\n  addTile(map);\r\n\r\n  gpxPolyline = L.polyline([],\r\n      {smoothFactor: 0.5, weight: 4, color: '#00ad53'}).addTo(map);\r\n\r\n  gpxLineDecorator = L.polylineDecorator([], {\r\n    patterns: [{\r\n      repeat: 50,\r\n      symbol: L.Symbol.arrowHead({\r\n        pixelSize: 5,\r\n        headAngle: 75,\r\n        polygon: false,\r\n        pathOptions: {\r\n          stroke: true,\r\n          weight: 2,\r\n          color: '#f5f5dc'\r\n        }\r\n      })\r\n    }]\r\n  }).addTo(map);\r\n});\r\n</script>\r\n\r\n<style>\r\n#map {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>","import script from \"./mapView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./mapView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./mapView.vue?vue&type=style&index=0&id=5a5287d0&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <n-upload\r\n      ref=\"uploader\"\r\n      accept=\".gpx\"\r\n      :max=\"1\"\r\n      @before-upload=\"beforeUpload\"\r\n  >\r\n    <n-button color=\"#149D1F\" primary strong>打开 GPX</n-button>\r\n  </n-upload>\r\n</template>\r\n\r\n<script setup>\r\nimport {NButton, NUpload} from \"naive-ui\";\r\nimport {getCurrentInstance, ref} from \"vue\";\r\n\r\nlet uploader = ref(null);\r\n\r\nconst ctx = getCurrentInstance().appContext.config.globalProperties;\r\n\r\nconst beforeUpload = ({file}) => {\r\n  ctx.$bus.$emit(\"fileRead\", file.file);\r\n  ctx.$bus.$emit(\"fileTitleRead\", file.file.name);\r\n  return false;\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import script from \"./readGPX.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./readGPX.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <n-space justify=\"space-around\" vertical>\r\n    <n-card\r\n        id=\"title\"\r\n        :bordered=\"false\"\r\n        header-style=\"font-size:2.5em\"\r\n        title=\"GPXbox\"\r\n    ></n-card>\r\n    <!--这个是网页的标题-->\r\n\r\n    <n-space justify=\"space-evenly\">\r\n      <GPXreader/>\r\n      <n-button secondary strong @click=\"clickPlayButton\">\r\n        <n-icon :component=\"Play\"/>\r\n        &nbsp;播放\r\n      </n-button>\r\n\r\n      <n-button secondary strong @click=\"clickPauseButton\">\r\n        <n-icon :component=\"Pause\"/>\r\n        &nbsp;暂停\r\n      </n-button>\r\n    </n-space>\r\n\r\n    <n-space justify=\"space-evenly\">\r\n      <n-button secondary strong @click=\"clickPlayButton\">\r\n        <n-icon :component=\"PlayBack\"/>\r\n        &nbsp;倒放\r\n      </n-button>\r\n\r\n      <n-button secondary strong @click=\"clickBackToStartButton\">\r\n        <n-icon :component=\"ReturnUpBack\"/>\r\n        &nbsp;回到起点\r\n      </n-button>\r\n\r\n      <n-dropdown :options=\"speedUnitOptions\" trigger=\"hover\" @select=\"handleSpeedUnitChanged\">\r\n        <n-button secondary strong>\r\n          <n-icon :component=\"BarChart\"/>\r\n          &nbsp;速度单位\r\n        </n-button>\r\n      </n-dropdown>\r\n    </n-space>\r\n\r\n    <n-tooltip trigger=\"hover\">\r\n      <template #trigger>\r\n        <n-input-number id=\"inputNumber\" :default-value=\"1\" :max=\"5\" :min=\"0.1\" :value=\"speedRatio\"\r\n                        @update:value=\"handleSpeedRatioChanged\">\r\n          <template #suffix>\r\n            倍速\r\n          </template>\r\n          <template #prefix>\r\n            <n-icon :component=\"Speedometer\" :depth=\"1\"/>\r\n          </template>\r\n        </n-input-number>\r\n      </template>\r\n      允许设置的倍速范围为 0.1 ~ 5\r\n    </n-tooltip>\r\n\r\n    <n-grid :cols=\"2\" x-gap=\"4\">\r\n      <n-gi class=\"statsLabel\">总里程</n-gi>\r\n      <n-gi class=\"statsLabel\">总时间</n-gi>\r\n      <n-gi class=\"statsData\">\r\n        <n-icon :component=\"Analytics\"/>\r\n        {{ totalDistance }}\r\n      </n-gi>\r\n      <n-gi class=\"statsData\">\r\n        <n-icon :component=\"Timer\"/>\r\n        {{ totalTime }}\r\n      </n-gi>\r\n      <n-gi class=\"statsLabel\">平均速度</n-gi>\r\n      <n-gi class=\"statsLabel\">记录点数量</n-gi>\r\n      <n-gi class=\"statsData\">\r\n        <n-icon :component=\"SpeedometerSharp\"/>\r\n        {{ meanSpeed }}\r\n      </n-gi>\r\n      <n-gi class=\"statsData\">\r\n        <n-icon :component=\"StatsChart\"/>\r\n        {{ numPoints }}\r\n      </n-gi>\r\n    </n-grid>\r\n\r\n    <n-slider id=\"slider\" v-model:value=\"sliderValue\" :format-tooltip=\"v=>{return `${v/10}%`}\" :max=\"1000\"\r\n              :step=\"1\" placement=\"bottom\"/>\r\n  </n-space>\r\n\r\n</template>\r\n\r\n<script setup>\r\n//TODO 拖动进度条 倒放\r\n// noinspection SpellCheckingInspection\r\nimport GPXreader from \"./readGPX\";\r\nimport {getCurrentInstance, h, ref} from \"vue\";\r\nimport {\r\n  Analytics,\r\n  BarChart,\r\n  Checkmark,\r\n  Pause,\r\n  Play,\r\n  PlayBack,\r\n  ReturnUpBack,\r\n  Speedometer,\r\n  SpeedometerSharp,\r\n  StatsChart,\r\n  Timer\r\n} from \"@vicons/ionicons5\";\r\nimport {\r\n  NButton,\r\n  NCard,\r\n  NDropdown,\r\n  NGi,\r\n  NGrid,\r\n  NIcon,\r\n  NInputNumber,\r\n  NSlider,\r\n  NSpace,\r\n  NTooltip,\r\n  useMessage\r\n} from \"naive-ui\";\r\n\r\n//TODO:拖动进度、信息展示、倒放\r\n\r\nconst renderIcon = (icon) => {\r\n  return () => {\r\n    return h(NIcon, null, {\r\n      default: () => h(icon)\r\n    });\r\n  };\r\n};\r\n\r\nlet _meanSpeed;\r\nlet unitOfSpeed = 0;\r\nlet stats;\r\nconst speedRatio = ref();\r\nconst sliderValue = ref(500);\r\nconst totalDistance = ref();\r\nconst totalTime = ref();\r\nconst meanSpeed = ref();\r\nconst numPoints = ref();\r\nconst message = useMessage();\r\nconst checkMark = renderIcon(Checkmark);\r\nconst ctx = getCurrentInstance().appContext.config.globalProperties;\r\n\r\nctx.$bus.$on('statsData', _stats => {\r\n  stats = _stats;\r\n\r\n  if (stats.totalDistance >= 10000)\r\n    totalDistance.value = (stats.totalDistance / 1000).toFixed(2) + 'km';\r\n  else totalDistance.value = stats.totalDistance + 'm';\r\n\r\n  totalTime.value = stats.totalTime;\r\n  numPoints.value = stats.numPoints;\r\n\r\n  _meanSpeed = stats.meanSpeed;\r\n  meanSpeed.value = _meanSpeed[unitOfSpeed];\r\n});\r\n\r\n\r\nconst speedUnitOptions = ref([\r\n  {\r\n    label: 'm/s',\r\n    key: 0,\r\n    icon: checkMark\r\n  },\r\n  {\r\n    label: 'km/h',\r\n    key: 1\r\n  },\r\n  {\r\n    label: 'min/km (Experimental)',\r\n    key: 2\r\n  }\r\n])\r\n\r\nfunction handleSpeedUnitChanged(key) {\r\n  for (let i = 0; i < 3; i++) {\r\n    speedUnitOptions.value[i].icon = null;\r\n  }\r\n  speedUnitOptions.value[key].icon = checkMark;\r\n  ctx.$bus.$emit('unitOfSpeedChanged', key);\r\n  meanSpeed.value = _meanSpeed[key];\r\n}\r\n\r\n\r\nfunction handleSpeedRatioChanged(key) {\r\n  if (key !== null) {\r\n    ctx.$bus.$emit('speedRatioChanged', key);\r\n    message.info('调整为' + key + '倍速');\r\n    speedRatio.value = key;\r\n  }\r\n}\r\n\r\nfunction clickPlayButton() {\r\n  ctx.$bus.$emit('play');\r\n}\r\n\r\nfunction clickPauseButton() {\r\n  ctx.$bus.$emit('pause');\r\n}\r\n\r\nfunction clickBackToStartButton() {\r\n  ctx.$bus.$emit('backToStart');\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n#title {\r\n  background-color: rgba(0, 0, 0, 0);\r\n}\r\n\r\n#inputNumber {\r\n  margin: 0 auto;\r\n  width: 90%;\r\n}\r\n\r\n#slider {\r\n  margin: 0 auto;\r\n  width: 80%;\r\n}\r\n\r\n.statsLabel {\r\n  font-size: 12px;\r\n  opacity: 75%;\r\n}\r\n\r\n.statsData {\r\n  font-size: 17px;\r\n}\r\n</style>","import script from \"./controlPanel.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./controlPanel.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./controlPanel.vue?vue&type=style&index=0&id=187639d2&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","export function mean(numArr) {\r\n    let dataLength = numArr.length;\r\n\r\n    if (dataLength === undefined) {\r\n        return numArr;\r\n    } else {\r\n        let sum = 0;\r\n        for (let i = 0; i < dataLength; i++) {\r\n            sum += numArr[i];\r\n        }\r\n        return sum / dataLength;\r\n    }\r\n}\r\n\r\nexport function timeFormat(inputData) {\r\n    const dt = new Date(inputData);\r\n\r\n    let year = dt.getFullYear();//年\r\n    let month = dt.getMonth() + 1;//月；从0开始所以要加1\r\n    let date = dt.getDate();//日\r\n    let hour = dt.getHours();\r\n    let minutes = dt.getMinutes();\r\n    let seconds = dt.getSeconds();\r\n\r\n    month = month > 9 ? month : \"0\" + month;\r\n    date = date > 9 ? date : \"0\" + date;\r\n    hour = hour > 9 ? hour : \"0\" + hour;\r\n    minutes = minutes > 9 ? minutes : \"0\" + minutes;\r\n    seconds = seconds > 9 ? seconds : \"0\" + seconds;\r\n\r\n    return `${year}-${month}-${date} ${hour}:${minutes}:${seconds}`;\r\n}\r\n\r\n\r\nexport function formatSecond(time) {\r\n    time = time / 1000;\r\n    const h = parseInt(time / 3600);\r\n    const minute = parseInt(time / 60 % 60);\r\n    const second = Math.ceil(time % 60);\r\n\r\n    const hours = h < 10 ? '0' + h : h;\r\n    const formatSecond = second > 59 ? 59 : second;\r\n    return `${hours > 0 ? `${hours}:` : ''}${minute < 10 ? '0' + minute : minute}:${formatSecond < 10 ? '0' + formatSecond : formatSecond}`;\r\n}\r\n","import GpxParser from 'gpxparser'\r\nimport {formatSecond, mean} from \"@/components/utils\";\r\n\r\nfunction GpxProcess(fileText) {\r\n    let gpx = new GpxParser();\r\n    gpx.parse(fileText);\r\n\r\n    let data = gpx.tracks[0];\r\n    let dist = data.distance.cumul;\r\n    let points = data.points;\r\n\r\n    let timeArr = points.map((item) => {\r\n        return +item.time;\r\n    });\r\n\r\n    let dataLength = dist.length;\r\n    let speedArr = new Array(dataLength);\r\n    let diffDist, diffTime;\r\n    for (let i = 0; i < dataLength - 2; i++) {\r\n        diffDist = dist[i + 2] - dist[i];\r\n        diffTime = timeArr[i + 2] - timeArr[i];\r\n        speedArr[i + 1] = 1000 * diffDist / diffTime;\r\n    }\r\n\r\n    speedArr[0] = 1000 * dist[0] / (points[1].time - points[0].time);\r\n    speedArr[dataLength - 1] = 1000 * (dist[dataLength - 1] - dist[dataLength - 3]) / (points[dataLength - 1].time - points[dataLength - 3].time);\r\n\r\n    this._timeArr = timeArr;\r\n    this.speedArr = speedArr;\r\n    this.gpx = gpx;\r\n    this._data = null;\r\n    this._dataAsKmPreHour = null;\r\n    this._dataAsMinutePerKm = null;\r\n    this._polyline = null;\r\n    this._stats = null;\r\n}\r\n\r\nGpxProcess.prototype.getData = function () {\r\n    if (this._data === null) {\r\n        const timeArr = this._timeArr;\r\n        const speedArr = this.speedArr;\r\n        const dataLength = timeArr.length;\r\n\r\n        let chartDataArr = new Array(dataLength)\r\n        for (let i = 0; i < dataLength; i++) {\r\n            chartDataArr[i] = {value: [timeArr[i], speedArr[i]]};\r\n        }\r\n        this._data = chartDataArr;\r\n    }\r\n\r\n    return this._data;\r\n}\r\n\r\nGpxProcess.prototype.getDataAsKmPreHour = function () {\r\n    if (this._dataAsKmPreHour === null) {\r\n        const timeArr = this._timeArr;\r\n        const speedArr = this.speedArr;\r\n        const dataLength = timeArr.length;\r\n\r\n        let chartDataArr = new Array(dataLength)\r\n        for (let i = 0; i < dataLength; i++) {\r\n            chartDataArr[i] = {value: [timeArr[i], 3.6 * speedArr[i]]};\r\n        }\r\n        this._dataAsKmPreHour = chartDataArr;\r\n    }\r\n\r\n    return this._dataAsKmPreHour;\r\n}\r\n\r\nGpxProcess.prototype.getDataAsMinutePerKm = function () {\r\n    if (this._dataAsMinutePerKm === null) {\r\n\r\n        const timeArr = this._timeArr;\r\n        const speedArr = this.speedArr;\r\n        const dataLength = timeArr.length;\r\n\r\n        const total_time = timeArr[timeArr.length - 1] - timeArr[0];\r\n        const total_dist = this.gpx.tracks[0].distance.total\r\n        const avgPace = total_time / (60 * total_dist);\r\n\r\n        let chartDataArr = new Array(dataLength);\r\n        let tempSpeed;\r\n        let currPace;\r\n        for (let i = 0; i < dataLength; i++) {\r\n            if (speedArr[i] < 0.2) {\r\n                if (i > 1 && i < dataLength - 2) {\r\n                    tempSpeed = speedArr.slice(i - 2, i + 2);\r\n                } else if (i === 1 || i === dataLength - 2) {\r\n                    tempSpeed = speedArr.slice(i - 1, i + 1);\r\n                } else if (i === 0) {\r\n                    tempSpeed = speedArr.slice(0, 2);\r\n                } else {\r\n                    tempSpeed = speedArr.slice(dataLength - 2, dataLength);\r\n                }\r\n                currPace = 50 / (3 * mean(tempSpeed));\r\n            } else {\r\n                currPace = 50 / (3 * speedArr[i]);\r\n            }\r\n\r\n            if (currPace > avgPace * 3) currPace = 0;\r\n\r\n            chartDataArr[i] = {value: [timeArr[i], currPace]};\r\n        }\r\n\r\n        this._dataAsMinutePerKm = chartDataArr;\r\n    }\r\n\r\n    return this._dataAsMinutePerKm;\r\n}\r\n\r\nGpxProcess.prototype.toPolyline = function () {\r\n    if (this._polyline === null) {\r\n        const points = this.gpx.tracks[0].points;\r\n        const dataLength = points.length;\r\n        let polyline = new Array(dataLength);\r\n        let currPoint;\r\n        for (let i = 0; i < dataLength; i++) {\r\n            currPoint = points[i];\r\n            polyline[i] = [currPoint.lat, currPoint.lon];\r\n        }\r\n        this._polyline = polyline;\r\n    }\r\n\r\n    return this._polyline;\r\n}\r\n\r\nGpxProcess.prototype.getTimeArr = function () {\r\n    return this._timeArr;\r\n}\r\nGpxProcess.prototype.getStats = function () {\r\n    if (this._stats === null) {\r\n        let stats = {};\r\n        const dataLength = this._timeArr.length;\r\n        const _totalTime = this.gpx.tracks[0].points[dataLength - 1].time - this.gpx.tracks[0].points[0].time;\r\n        stats.numPoints = dataLength;\r\n        stats.totalTime = formatSecond(_totalTime)\r\n        stats.totalDistance = this.gpx.tracks[0].distance.total.toFixed();\r\n        const speed = 1000 * stats.totalDistance / _totalTime;\r\n        const speedAsKmPreHour = speed * 3.6;\r\n        const speedAsMinutePerKm = 1000 / speed;\r\n\r\n        stats.meanSpeed = [\r\n            speed.toFixed(2) + 'm/s',\r\n            speedAsKmPreHour.toFixed(2) + 'km/h',\r\n            speedAsMinutePerKm.toFixed(0) + 'sec/km'\r\n        ];\r\n        console.log(stats.meanSpeed);\r\n        this._stats = stats;\r\n    }\r\n    return this._stats;\r\n}\r\n\r\n\r\nexport default GpxProcess;","<template>\r\n  <v-chart ref=\"chart\" :autoresize=\"true\" :option=\"option\"/>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport VChart, {THEME_KEY} from \"vue-echarts\";\r\nimport {getCurrentInstance, onMounted, provide, ref} from \"vue\";\r\nimport * as echarts from 'echarts/core';\r\nimport {\r\n  DataZoomComponent,\r\n  GridComponent,\r\n  MarkLineComponent,\r\n  MarkPointComponent,\r\n  TitleComponent,\r\n  ToolboxComponent,\r\n  TooltipComponent\r\n} from 'echarts/components';\r\nimport {LineChart} from 'echarts/charts';\r\nimport {UniversalTransition} from 'echarts/features';\r\nimport {CanvasRenderer} from 'echarts/renderers';\r\nimport GpxProcess from \"@/components/Control/gpxProcess\";\r\nimport { timeFormat} from \"@/components/utils\";\r\n\r\nprovide(THEME_KEY, \"light\")\r\n\r\necharts.use([\r\n  GridComponent,\r\n  MarkPointComponent,\r\n  MarkLineComponent,\r\n  ToolboxComponent,\r\n  DataZoomComponent,\r\n  TitleComponent,\r\n  TooltipComponent,\r\n  LineChart,\r\n  CanvasRenderer,\r\n  UniversalTransition,\r\n]);\r\n\r\nlet speedRatio = 1;\r\nlet gpx;\r\nlet index;\r\nlet chartData;\r\nlet timeDelta;\r\nlet dataLength;\r\n\r\nlet _option = {\r\n  title: {text: 'GPXbox', left: 'center'},\r\n  tooltip: {\r\n    trigger: 'axis',\r\n    formatter: (params) => {\r\n      params = params[0].data;\r\n      let dateStr = timeFormat(params.value[0]);\r\n      return `<p>${dateStr}<br/>${params.value[1].toFixed(2)}</p>`;\r\n    },\r\n    axisPointer: {\r\n      type: 'cross',\r\n      animation: true,\r\n      snap: true\r\n    }\r\n  },\r\n  xAxis: {\r\n    type: 'time',\r\n    splitLine: {\r\n      show: false\r\n    },\r\n    boundaryGap: false\r\n  },\r\n  yAxis: {\r\n    type: 'value',\r\n    scale: true,\r\n    boundaryGap: ['0%', '0%'],\r\n    splitNumber: 2\r\n  },\r\n  toolbox: {\r\n    show: true,\r\n    feature: {\r\n      saveAsImage: {}\r\n    }\r\n  },\r\n  dataZoom: [\r\n    {\r\n      type: 'slider',\r\n      xAxisIndex: 0,\r\n      filterMode: 'filter'\r\n    }, {\r\n      type: 'slider',\r\n      yAxisIndex: 0,\r\n      filterMode: 'none',\r\n      left: '92%'\r\n    }\r\n  ],\r\n  series: [\r\n    {\r\n      type: 'line',\r\n      smooth: true,\r\n      showSymbol: false,\r\n      markLine: {\r\n        symbol: 'none',\r\n        data: [\r\n          {\r\n            symbol: 'circle',\r\n            label: {\r\n              position: 'end',\r\n              backgroundColor: \"rgba(143,243,192,0.5)\",\r\n              borderRadius: [4, 4, 4, 4],\r\n              padding: [5, 5, 5, 5],\r\n              formatter: (input) => {\r\n                return timeFormat(input.data.coord[0]);\r\n              }\r\n            },\r\n            xAxis: 0\r\n          },\r\n          {\r\n            symbol: 'circle',\r\n            yAxis: 0,\r\n            label: {\r\n              position: 'start',\r\n              backgroundColor: \"rgba(143,243,192,0.75)\",\r\n              borderRadius: [4, 4, 4, 4],\r\n              padding: [5, 5, 5, 5],\r\n              formatter: '{c} m/s'\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      markPoint: {\r\n        data: [],\r\n        symbol: \"circle\",\r\n        label: {\r\n          show: false\r\n        },\r\n        symbolSize: 6,\r\n        itemStyle: {\r\n          color: \"rgba(255, 0, 0, 1)\"\r\n        }\r\n      }\r\n    }\r\n  ],\r\n}\r\nlet option = ref(_option);\r\nconst chart = ref();\r\n\r\nonMounted(() => {\r\n  // chart.value.setOption(_option);\r\n})\r\n\r\nconst ctx = getCurrentInstance().appContext.config.globalProperties;\r\n\r\nlet setTimeoutID = [];\r\n\r\nfunction addChart(file) {\r\n  const fr = new FileReader();\r\n  fr.readAsText(file, 'utf-8');\r\n\r\n  fr.onload = () => {\r\n    for (let j = 0, idLength = setTimeoutID.length; j < idLength; j++)\r\n      clearTimeout(setTimeoutID[j]);\r\n\r\n    gpx = new GpxProcess(fr.result);\r\n\r\n    index = 0;\r\n    chartData = gpx.getData();\r\n    option.value.series[0].data = chartData;\r\n\r\n    let timeArr = gpx.getTimeArr();\r\n    dataLength = chartData.length;\r\n    timeDelta = new Array(dataLength);\r\n    for (let i = 0; i < dataLength; i++) {\r\n      timeDelta[i] = timeArr[i + 1] - timeArr[i];\r\n    }\r\n    timeDelta[dataLength - 1] = 0;\r\n\r\n    ctx.$bus.$emit('sendPolyline', {polyline: gpx.toPolyline(), timeDelta: timeDelta});\r\n    ctx.$bus.$emit('statsData',gpx.getStats());\r\n  }\r\n\r\n}\r\n\r\nctx.$bus.$on(\"fileRead\", addChart);\r\n\r\nctx.$bus.$on(\"fileTitleRead\", (title) => {\r\n  option.value.title.text = title;\r\n});\r\n\r\nctx.$bus.$on('speedRatioChanged', (sc) => {\r\n  speedRatio = sc;\r\n});\r\n\r\nctx.$bus.$on('play', () => {\r\n  let set = () => {\r\n    if (index < dataLength - 1) {\r\n      option.value.series[0].markLine.data[0].xAxis = chartData[index].value[0];\r\n      option.value.series[0].markLine.data[1].yAxis = chartData[index].value[1];\r\n      option.value.series[0].markPoint.data[0] = {coord: chartData[index].value};\r\n      // console.log('wait for ' + timeDelta[index] / speedRatio);\r\n      setTimeoutID.push(setTimeout(set, timeDelta[index] / speedRatio));\r\n      index++;\r\n    }\r\n  }\r\n  setTimeoutID.push(setTimeout(set, 0));\r\n});\r\n\r\nctx.$bus.$on('pause', () => {\r\n  for (let i = 0, idLength = setTimeoutID.length; i < idLength; i++) {\r\n    clearTimeout(setTimeoutID[i]);\r\n  }\r\n});\r\n\r\nctx.$bus.$on('backToStart', () => {\r\n  index = 0;\r\n  option.value.series[0].markLine.data[0].xAxis = chartData[0].value[0];\r\n  option.value.series[0].markLine.data[1].yAxis = chartData[0].value[1];\r\n  option.value.series[0].markPoint.data[0] = {coord: chartData[0].value};\r\n});\r\n\r\nctx.$bus.$on('unitOfSpeedChanged', key => {\r\n  if (key === 0) {\r\n    chartData = gpx.getData();\r\n    option.value.series[0].markLine.data[1].label.formatter = '{c} m/s';\r\n\r\n  } else if (key === 1) {\r\n    chartData = gpx.getDataAsKmPreHour();\r\n    option.value.series[0].markLine.data[1].label.formatter = '{c} km/h';\r\n\r\n  } else if (key === 2) {\r\n    chartData = gpx.getDataAsMinutePerKm();\r\n    option.value.series[0].markLine.data[1].label.formatter = (params) => {\r\n      let min = Math.trunc(params.data.value);\r\n      let sec = Math.trunc((params.data.value - min) * 60);\r\n      if (sec < 10) sec = '0' + sec;\r\n      return min + ':' + sec;\r\n    }\r\n  } else {\r\n    console.log(key);\r\n  }\r\n\r\n  option.value.series[0].data = chartData;\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import script from \"./viewChart.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./viewChart.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=fe349154&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import mitt from \"mitt\";\r\n\r\nconst emitter = mitt()\r\n\r\nconst bus = {}\r\nbus.$on = emitter.on\r\nbus.$off = emitter.off\r\nbus.$emit = emitter.emit\r\n\r\nexport default bus","import { createApp } from 'vue'\nimport App from './App'\nimport bus from './components/bus'\n\nconst app = createApp(App);\n\napp.config.globalProperties.$bus = bus;\n\napp.mount('#app');\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkgpxbox\"] = self[\"webpackChunkgpxbox\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(533); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["map","gpxPolyline","gpxLineDecorator","index","animP","dataLength","inputPolyline","timeDelta","speedRatio","setTimeoutID","addMap","L","center","zoom","attributionControl","addScale","maxWidth","metric","imperial","addTo","addTile","tileUrl","minZoom","maxZoom","addCircle","ctx","getCurrentInstance","appContext","config","globalProperties","$bus","$on","sc","input","setLatLngs","polyline","setPaths","fitBounds","getBounds","undefined","lat","lon","smoothFactor","weight","color","length","inputPl","Array","i","point","set","addLatLng","push","setTimeout","j","idLength","clearTimeout","startPoint","getLatLngs","onMounted","patterns","repeat","symbol","pixelSize","headAngle","polygon","pathOptions","stroke","__exports__","uploader","ref","beforeUpload","file","$emit","name","renderIcon","icon","h","NIcon","default","_meanSpeed","stats","unitOfSpeed","sliderValue","totalDistance","totalTime","meanSpeed","numPoints","message","useMessage","checkMark","Checkmark","_stats","value","toFixed","speedUnitOptions","label","key","handleSpeedUnitChanged","handleSpeedRatioChanged","info","clickPlayButton","clickPauseButton","clickBackToStartButton","mean","numArr","sum","timeFormat","inputData","dt","Date","year","getFullYear","month","getMonth","date","getDate","hour","getHours","minutes","getMinutes","seconds","getSeconds","formatSecond","time","parseInt","minute","second","Math","ceil","hours","GpxProcess","fileText","gpx","GpxParser","parse","diffDist","diffTime","data","tracks","dist","distance","cumul","points","timeArr","item","speedArr","this","_timeArr","_data","_dataAsKmPreHour","_dataAsMinutePerKm","_polyline","prototype","getData","chartDataArr","getDataAsKmPreHour","getDataAsMinutePerKm","total_time","total_dist","total","avgPace","tempSpeed","currPace","slice","toPolyline","currPoint","getTimeArr","getStats","_totalTime","speed","speedAsKmPreHour","speedAsMinutePerKm","console","log","provide","THEME_KEY","echarts","GridComponent","MarkPointComponent","MarkLineComponent","ToolboxComponent","DataZoomComponent","TitleComponent","TooltipComponent","LineChart","CanvasRenderer","UniversalTransition","chartData","_option","title","text","left","tooltip","trigger","formatter","params","dateStr","axisPointer","type","animation","snap","xAxis","splitLine","show","boundaryGap","yAxis","scale","splitNumber","toolbox","feature","saveAsImage","dataZoom","xAxisIndex","filterMode","yAxisIndex","series","smooth","showSymbol","markLine","position","backgroundColor","borderRadius","padding","coord","markPoint","symbolSize","itemStyle","option","chart","addChart","fr","FileReader","readAsText","onload","result","min","trunc","sec","emitter","mitt","bus","on","$off","off","emit","app","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","Object","keys","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","window","obj","prop","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}